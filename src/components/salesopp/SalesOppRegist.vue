<template>
    <div class="regist-content">
        <div class="order-regist">
            <h1>ì˜ì—…ê¸°íšŒ ë“±ë¡</h1>
        </div>
        <div class="order-list-box1">
            <table class="order-table1">
                <thead>
                    <tr>
                        <th>ê±°ë˜ì²˜ ëª…</th>
                        <th>ê±°ë˜ì²˜ ë‹´ë‹¹ì</th>
                        <th>ê±°ë˜ì²˜ ì£¼ì†Œ</th>
                        <th>ì—°ë½ì²˜</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input v-model="newOpp.oppAccountName" placeholder="ê±°ë˜ì²˜ ëª…"></td>
                        <td><input v-model="newOpp.oppAccountPic" placeholder="ê±°ë˜ì²˜ ë‹´ë‹¹ì"></td>
                        <td><input v-model="newOpp.oppAccountLocation" placeholder="ê±°ë˜ì²˜ ì£¼ì†Œ"></td>
                        <td><input v-model="newOpp.oppAccountContact" placeholder="ì—°ë½ì²˜"></td>
                    </tr>
                </tbody>
            </table>
            <table class="order-table2">
                <thead>
                    <tr>
                        <th>ë¹„ê³ </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input v-model="newOpp.oppAccountNote" placeholder="ë¹„ê³ "></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="estimate-attachment">
            <div class="estimate-attachment-header">
                <h2 class="estimate-file">ì²¨ë¶€íŒŒì¼</h2>
                <img src="@/assets/img/pdf.png" class="estimate-pdfimage">
            </div>
            <div class="estimate-attachment-content">
                <div class="file-list">
                    <span class="file-icon">ğŸ“„</span>
                    <span class="file-name">ì œí’ˆ ì¹´íƒˆë¡œê·¸.pdf</span>
                </div>
            </div>
        </div>
        <div class="estimate-regist-btn-div">
            <button class="estimate-regist-btn" @click="registSalesOpp">ì˜ì—…ê¸°íšŒ ë“±ë¡í•˜ê¸°</button>
        </div>
    </div>
</template>

<script setup>
import { ref } from 'vue';
import axios from 'axios';

const newOpp = ref({
    oppAccountName: '',
    oppAccountPic: '',
    oppAccountLocation: '',
    oppAccountContact: '',
    oppAccountNote: '',
    oppAccountEmail:'a@naver.com',
    salesOppStatus: { salesOppStatusId: 1 }, // ê¸°ë³¸ ìƒíƒœ ID ì„¤ì •
    employee: {
            employeeId: 1
        },
});

const registSalesOpp = async () => {
    try {
        const response = await axios.post('http://localhost:7775/sales_opportunity/regist', newOpp.value);
        alert('ì˜ì—…ê¸°íšŒê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
        console.log('ë“±ë¡ëœ ì˜ì—…ê¸°íšŒ:', response.data);
    } catch (error) {
        console.error('ì˜ì—…ê¸°íšŒ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:', error);
        alert('ì˜ì—…ê¸°íšŒ ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
};
</script>

<style>
@import url('@/assets/css/order/OrderRegist.css');
</style>